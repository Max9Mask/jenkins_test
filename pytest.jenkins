pipeline {
   agent any

   stages {
	stage('install packages') {
		steps {
	  		sh 'python3 -m venv env'
			sh '. env/bin/activate'
			sh 'which python'
			sh 'python3 -m pip install -r requirements.txt'
		}
	}
    stage('run tests') {
        steps{      
            sh 'pytest --alluredir=allure-report pytest_cases.py'
	    sh 'allure serve allure-report'
        }
        }

  }
}
